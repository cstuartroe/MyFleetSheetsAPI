<!DOCTYPE html>
<html>
	<head>
		<script src="myfleetsheets_api.js"></script>
		<style leave="true" type="text/css">
			td {
				padding: 2vh 2vh 2vh 0;
			}
		</style>
	</head>
	<body style = "text-align: center;">
		<h2>Fleet Sheets API example</h2>
		<table style = "display: inline-block; text-align: left;" id="listing_table">
			<tr>
				<th>Serial</th>
				<th>Make</th>
				<th>Model</th>
				<th>Registration</th>
				<th>Year</th>
			</tr>
		</table>
		<script>
			var cols = ["serial","make","model", "registration", "year"];
			var prefs = {
				"email":     "plane_enthusiast@example.com",
				"key":       "b2I-Jh_pvGVeGGJ8",
				"since":     "4d",
				"max_price": 10000000,
				"year":      "2012-2019",
				"make":      "BEECHCRAFT,CESSNA,PILATUS"
			}

			var fillTable = function (listing_json) {
				for (var i = 0; i < listing_json["results"].length; i++) {
					var new_tr = document.createElement("tr");
					document.getElementById("listing_table").appendChild(new_tr);

					for (var j = 0; j < cols.length; j++) {
						var new_td = document.createElement("td");
						new_tr.appendChild(new_td);

						var value = listing_json["results"][i][cols[j]];
						if (value) {
							var new_tn = document.createTextNode(value);
							new_td.appendChild(new_tn);
						}
					}
				}
			}

			APIrequest(prefs, fillTable);
		</script>
	</body>
</html>
